<view class="container">
  <view class="header" style="padding-top: {{statusBarHeight}}px;">
    <view class="back-icon-wrap">
      <back-icon />
    </view>
    <view class="friend-info">
      <image class="friend-avatar" src="{{friendAvatarUrl}}" />
      <view class="friend-name">{{friendName}}</view>
    </view>
  </view>

  <!-- 商品 -->
  <view class="goods-list" wx:if="{{goodsInfo}}" style="top: 10px">
    <image class="goods-img" src="{{goodsInfo.cover}}" mode="aspectFit" />
      <view class="goods-detail">
        <view class="goods-name omit">{{goodsInfo.name}}</view>
        <view class="operation-wrap">
          <view class="goods-price">
            <text style="font-size: 10px;">¥</text>{{goodsInfo.price}}
          </view>
          <view class="seek-btn" bindtap="sendCustomMsg" data-type="1">咨询商品</view>
        </view>
      </view>
  </view>

  <!-- 订单 -->
  <view class="order-list" wx:if="{{orderInfo}}" style="top: {{statusBarHeight + 55}}px">
    <image class="goods-img" src="{{orderInfo.goodsList[0].goods_thumb}}" mode="aspectFit" />
    <view class="order-detail">
      <view class="order-num">
        <view class="order-num-tip">订单号</view>
        <view>{{orderInfo.orderList.order_sn}}</view>
      </view>
      <view class="consignee">收件人：{{orderInfo.orderList.consignee}}</view>
      <view class="order-time">下单时间：{{orderInfo.orderList.formated_add_time}}</view>
    </view>
    <view class="order-operation">
      <view class="order-status">{{compositeStatus}}</view>
      <view class="seek-btn" bindtap="sendCustomMsg" data-type="2">咨询订单</view>
    </view>
  </view>

  <comment-list
    class="comment" 
    msgList="{{msgList || []}}" 
    userInfo="{{userInfo || null}}" 
    friendAvatarUrl="{{friendAvatarUrl}}"
    bindtap="blurInput" 
  />

  <view class="chat-reply" style="padding-bottom: {{containerBottom ? containerBottom + 12 + 'px' : 'env(safe-area-inset-bottom)'}};">
    <view class="chat-input-wrap">
      <input 
        class="chat-input"
        type="text" 
        confirm-type="send"
        value="{{content}}"
        bindinput="getContent" 
        bindfocus="showKeyBoard" 
        bindblur="hideKeyBoard"
        placeholder="请输入消息" 
        bindconfirm="sendMsg" 
        adjust-position="{{false}}"
      />
      <image class="face-icon" bindtap="showEmojiWrap" src="https://static.tiddler.cn/mp/notice/face.png" />
      <image class="add-icon" bindtap="showMoreOperate" src="https://static.tiddler.cn/mp/notice/plus.png" />
    </view>

    <view class="emoji-wrap" wx:if="{{emojiWrapVisiabel}}">
      <view wx:for="{{emojiName}}" class="emoji" wx:key="index" bindtap="chooseEmoji" data-emoji="{{item}}">
        <image src="{{emojiUrl + emojiMap[item]}}" style="width:25px;height:25px"/>
      </view>
    </view>
    
    <view class="more-operate" wx:if="{{moreOperateVisiabel}}">
      <view class="icon-wrap" bindtap="sendPhoto" data-name="camera">
          <image style="width: 60rpx; height: 60rpx" src="https://static.tiddler.cn/mp/notice/camera.png" />
        </view>
      <view class="icon-wrap" bindtap="sendPhoto" data-name="album">
        <image style="width: 60rpx; height: 60rpx" src="https://static.tiddler.cn/mp/notice/album.png" />
      </view>
    </view>
  </view>
</view>
