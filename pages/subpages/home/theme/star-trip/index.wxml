<wxs module="IMG" src="/utils/filters/img.wxs" />

<view class="nav-bar-wrap" style="padding-top: {{statusBarHeight}}px;">
  <view class="nav-bar row">
    <back-icon />
    <image class="title" src="https://static.tiddler.cn/mp/trip_type/star_trip/title.webp" />
  </view>
</view>

<view class="header" style="margin-top: {{statusBarHeight + 44}}px;">
  <swiper class="trip-list" bindchange="swiperChange" previous-margin="32rpx" next-margin="328rpx" circular>
    <swiper-item wx:for="{{starTripList}}" wx:key="index">
      <view class="trip-item {{curTripIdx !== index ? 'unselect' : ''}}" bindtap="checkTrip" data-index="{{index}}">
        <image class="trip-cover" src="{{IMG.webp(item.cover)}}" mode="aspectFill" lazy-load />
        <view class="trip-info">
          <view class="trip-name">{{item.name}}</view>
          <view class="trip-desc row">
            <view>{{item.desc}}</view>
            <image class="trip-arrow" src="/images/arrow_white.png" />
          </view>
        </view>
        <image class="top-tag" wx:if="{{index <= 2}}" src="https://static.tiddler.cn/mp/trip_type/top_{{index + 1}}.png" mode="aspectFill" />
      </view>
    </swiper-item>
  </swiper>

  <view class="current-dot-wrap row">
    <view class="progress">
      <view class="progress-inner" style="width: {{(curTripIdx + 1) / (starTripList.length) * 100}}%;" />
    </view>
    <view class="current-dot">{{curTripIdx + 1}}/{{starTripList.length}}</view>
  </view>
</view>

<image class="sub-title" src="https://static.tiddler.cn/mp/trip_type/star_trip/subtitle.webp" />

<view class="media-wrap">
  <fall-flow 
    list="{{mediaList}}" 
    loading="{{loading}}"
    finished="{{finished}}"
    generic:item="media-item" 
  />
  <empty-illus wx:if="{{finished && !mediaList.length}}" desc="暂无同游玩法" />
</view>
